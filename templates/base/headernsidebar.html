{% load static %}

<style>
  .toggle-sub-menu {
    margin-left: 5px;
    display: inline-block;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid white;
    vertical-align: middle;
    transition: transform 0.3s ease;
  }

  .dropdown-toggle::after {
    display: none !important;
  }

  .dropdown.show .toggle-sub-menu {
    transform: rotate(180deg);
  }

  .social-sidebar {
    position: fixed;
    top: 40%;
    right: 0;
    z-index: 999;
    display: flex;
    flex-direction: column;
    gap: 5px;
  }

  .social-sidebar a {
    display: block;
    padding: 10px;
    color: #fff;
    text-align: center;
    border-radius: 5px 0 0 5px;
    transition: background 0.3s ease;
  }

  .social-sidebar a:hover {
    opacity: 0.9;
  }

  .social-sidebar a.whatsapp {
    background-color: #25D366;
  }

  .social-sidebar a.facebook {
    background-color: #3b5998;
  }

  .social-sidebar a.instagram {
    background-color: #E1306C;
  }

  .social-sidebar a.linkedin {
    background-color: #0077b5;
  }

  .social-sidebar i {
    font-size: 18px;
  }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
  <div class="container">
    <a class="navbar-brand" href="{% url 'home' %}">
      <img src="{% static 'images/shri.webp' %}" alt="Alpine FIBC" height="60" class="me-2">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'about_view' %}">About</a></li>

        <!-- Dropdown -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="productsDropdown" role="button">
            Products <span class="toggle-sub-menu"></span>
          </a>
          <ul class="dropdown-menu" aria-labelledby="productsDropdown">
            <li><a class="dropdown-item" href="{% url 'u_panel_fibc' %}">U Panel FIBC</a></li>
            <li><a class="dropdown-item" href="{% url 'circular_fibc' %}">Circular FIBC</a></li>
            <li><a class="dropdown-item" href="{% url 'baffle-fibc-bags' %}">Baffle FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url 'un-fibc-bags' %}">UN FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url 'food-grade-fibc-bags' %}">Food Grade FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url 'ventilated-fibc-bags' %}">Ventilated FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url 'conductive-fibc-bags' %}">Conductive FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url 'fibc-liners' %}">FIBC Liners</a></li>
            <li><a class="dropdown-item" href="{% url 'pp-woven-ground-cover' %}">PP Woven Ground Cover</a></li>
            <li><a class="dropdown-item" href="{% url 'fibc-bags' %}">FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url 'dissipative-fibc-bags' %}">Dissipative FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url '4-panel-fibc-bags' %}">4 Panel FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url 'conical-fibc-bags' %}">Conical FIBC Bags</a></li>
            <li><a class="dropdown-item" href="{% url 'pharma-grade-fibc-bags' %}">Pharma Grade FIBC Bags</a></li>
          </ul>
        </li>

        <li class="nav-item"><a class="nav-link" href="{% url 'quality' %}">Quality</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'infrastructure' %}">Infrastructure</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'certification' %}">Certification</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contact Us</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Social Sidebar -->
<div class="social-sidebar">
  <a href="https://wa.me/919820123033" class="whatsapp" target="_blank" title="WhatsApp">
    <i class="fab fa-whatsapp"></i>
  </a>
  <a href="https://www.linkedin.com/company/87458162/" class="linkedin" target="_blank" title="LinkedIn">
    <i class="fab fa-linkedin-in"></i>
  </a>
</div>

<!-- Dropdown JS -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggle = document.getElementById('productsDropdown');
    const parent = toggle.closest('.dropdown');
    const menu = parent.querySelector('.dropdown-menu');

    toggle.addEventListener('click', function (e) {
      e.preventDefault();
      e.stopPropagation();

      const isOpen = parent.classList.contains('show');

      document.querySelectorAll('.dropdown.show').forEach(d => {
        d.classList.remove('show');
        const m = d.querySelector('.dropdown-menu');
        if (m) m.classList.remove('show');
        const t = d.querySelector('.dropdown-toggle');
        if (t) t.setAttribute('aria-expanded', 'false');
      });

      if (!isOpen) {
        parent.classList.add('show');
        menu.classList.add('show');
        toggle.setAttribute('aria-expanded', 'true');
      } else {
        parent.classList.remove('show');
        menu.classList.remove('show');
        toggle.setAttribute('aria-expanded', 'false');
      }
    });

    document.addEventListener('click', function (e) {
      if (!parent.contains(e.target)) {
        parent.classList.remove('show');
        menu.classList.remove('show');
        toggle.setAttribute('aria-expanded', 'false');
      }
    });
  });
</script>
